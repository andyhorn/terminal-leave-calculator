<!DOCTYPE html>
<html>
  <head>
    <title>Terminal Leave Calculator</title>
    <meta name="viewport" content="width=device-width,initial-scale=1.0" />
    <link
      rel="stylesheet"
      href="https://stackpath.bootstrapcdn.com/bootstrap/4.5.0/css/bootstrap.min.css"
      integrity="sha384-9aIt2nRpC12Uk9gS9baDl411NQApFmC26EwAOH8WgZl5MYYxFfc+NcPb1dKGj7Sk"
      crossorigin="anonymous"
    />
    <script src="https://cdn.jsdelivr.net/npm/vue@2.6.11"></script>
    <link rel="stylesheet" href="style.css" />
  </head>
  <body>
    <div id="app">
      <div class="container">
        <!-- Header Section -->
        <section class="section">
          <h1>Terminal Leave Calculator</h1>
          <p>Let's get started...</p>
        </section>

        <!-- Situation Selection -->
        <section class="section" v-if="currentStep == 0">
          <div class="row">
            <div
              class="col d-flex flex-column justify-content-center align-items-center"
            >
              <p>What is your situation?</p>
              <p v-if="selectedSituation">
                You selected: {{ selectedSituation }}
              </p>
            </div>
            <div class="col">
              <div class="border rounded p-4">
                <div class="form-group">
                  <label for="situation-picker">Pick an Option</label>
                  <select
                    id="situation-picker"
                    v-model="selectedSituation"
                    class="form-control"
                  >
                    <option
                      v-for="(option, index) in situations"
                      :key="index"
                      :value="option"
                      >{{ option }}</option
                    >
                  </select>
                </div>
              </div>
            </div>
          </div>
        </section>

        <!-- Plan to Retire Section -->
        <section class="section" v-if="currentStep == 1">
          <div class="row">
            <div
              class="col d-flex flex-column justify-content-center align-items-center"
            >
              <p class="m-0 p-0">When do you plan to retire?</p>
              <p v-if="retirementDate" class="text-center">
                You selected a retirement date of: {{ retirementDate }}
              </p>
              <p class="text-danger text-center" v-if="dateWarning">
                Note: You can only retire on the 1st of the month; Your date has
                been automatically adjusted.
              </p>
            </div>
            <div class="col">
              <div class="border rounded p-4">
                <div class="form-group">
                  <label for="#retire-on-date-picker">Retire On</label>
                  <input
                    id="retire-on-date-picker"
                    class="form-control"
                    @change="handleRetirementOnDatePickerChange"
                    type="date"
                    v-model="retireOnDate"
                  />
                </div>
              </div>
              <p class="my-5 p-0 text-center">OR</p>
              <div class="border rounded p-4">
                <div class="form-group">
                  <label for="#retire-from-date-picker"
                    >Retire 20 Years From</label
                  >
                  <input
                    @change="handleRetirementFromDatePickerChange"
                    id="retire-from-date-picker"
                    class="form-control"
                    type="date"
                    v-model="retireFromDate"
                  />
                </div>
              </div>
            </div>
          </div>
        </section>

        <!-- Button Footer -->
        <section class="section fixed-bottom">
          <div class="row">
            <div class="col d-flex justify-content-center">
              <button
                class="btn btn-primary w-50"
                :disabled="isBackDisabled"
                @click="onBack"
              >
                Back
              </button>
            </div>
            <div class="col d-flex justify-content-center">
              <button
                class="btn btn-primary w-50"
                :disabled="isNextDisabled"
                @click="onNext"
              >
                Next
              </button>
            </div>
          </div>
        </section>
      </div>
    </div>
  </body>

  <script>
    var app = new Vue({
      el: "#app",
      data: {
        message: "hello world!",
        situations: [
          "I plan to retire",
          "I plan to separate",
          "I am being honorably involuntarily separated",
        ],
        selectedSituation: "",
        steps: [0, 1, 2],
        currentStep: 0,
        retireOnDate: null,
        retireFromDate: null,
        retirementDate: null,
        dateWarning: false,
      },
      computed: {
        isBackDisabled() {
          return this.currentStep == 0;
        },
        isNextDisabled() {
          if (this.currentStep >= this.steps.length) return true;

          if (this.currentStep == 0) return this.selectedSituation == "";
        },
      },
      methods: {
        onBack() {
          this.currentStep -= 1;
        },
        onNext() {
          this.currentStep += 1;
        },
        handleRetirementFromDatePickerChange() {
          this.retireOnDate = null;

          let date = new Date(this.retireFromDate);
          date.setFullYear(date.getFullYear() + 20);

          this.setRetirementDate(date.getTime());
        },
        handleRetirementOnDatePickerChange() {
          this.retireFromDate = null;

          const date = new Date(this.retireOnDate);

          this.setRetirementDate(date.getTime());
        },
        setRetirementDate(ticks) {
          this.dateWarning = false;
          let date = new Date(ticks);

          if (date.getDate() !== 1) {
            this.dateWarning = true;
            date.setDate(1);
            date.setMonth(date.getMonth() + 1);
          }

          this.retirementDate = date.toDateString();
        },
      },
    });
  </script>
</html>
